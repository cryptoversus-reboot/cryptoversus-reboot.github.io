<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://www.googletagmanager.com; style-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; img-src 'self' data:; connect-src 'self' https://www.google-analytics.com https://analytics.google.com;">
    
    <!-- Initial SEO Meta Tags (will be updated dynamically) -->
    <title>CryptoVersus.io - Enterprise Decentralized Infrastructure</title>
    <meta name="description" content="Leading provider of enterprise decentralized infrastructure solutions. AWS for the decentralized web with security, scalability, and innovation.">
    <meta name="keywords" content="blockchain, decentralized infrastructure, enterprise web3, crypto solutions, decentralized web, blockchain development, enterprise blockchain">
    <meta name="author" content="CryptoVersus Team">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="CryptoVersus.io - Enterprise Decentralized Infrastructure">
    <meta property="og:description" content="Leading provider of enterprise decentralized infrastructure solutions. Transform your business with secure, scalable Web3 technology.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cryptoversus.io">
    <meta property="og:site_name" content="CryptoVersus.io">
    <meta property="og:image" content="https://cryptoversus.io/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@cryptoversus">
    <meta name="twitter:creator" content="@cryptoversus">
    <meta name="twitter:title" content="CryptoVersus.io - Enterprise Decentralized Infrastructure">
    <meta name="twitter:description" content="Leading provider of enterprise decentralized infrastructure solutions. Transform your business with secure, scalable Web3 technology.">
    <meta name="twitter:image" content="https://cryptoversus.io/images/og-image.jpg">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CryptoVersus.io">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://cryptoversus.io/">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://www.googletagmanager.com">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DGYL8KG72E"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-DGYL8KG72E');
    </script>
    
    <!-- Initial Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "CryptoVersus.io",
        "url": "https://cryptoversus.io",
        "logo": "https://cryptoversus.io/images/logo.png",
        "description": "Leading provider of enterprise decentralized infrastructure solutions",
        "foundingDate": "2023",
        "sameAs": [
            "https://twitter.com/cryptoversus",
            "https://linkedin.com/company/cryptoversus",
            "https://github.com/cryptoversus"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "email": "contact@cryptoversus.io",
            "url": "https://cryptoversus.io/contact"
        },
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "US",
            "addressRegion": "Global"
        }
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "CryptoVersus.io",
        "url": "https://cryptoversus.io",
        "description": "Enterprise decentralized infrastructure solutions and Web3 services",
        "publisher": {
            "@type": "Organization",
            "name": "CryptoVersus.io",
            "url": "https://cryptoversus.io"
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://cryptoversus.io/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- Cache-busting meta tags for development -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Pico CSS -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"> -->
    
    <style>
        /* Custom overrides for CryptoVersus branding */
        :root {
            --cv-primary-500: #667eea;
            --cv-primary-600: #5a6fd8;
            --cv-primary-700: #4f5fc7;
            /* --cv-background-color: #ffffff; */ /* Overridden by explicit styles below */
        }
        /* Explicit shadcn/ui HSL-based theme overrides */
        body {
            background-color: hsl(240 10% 3.9%) !important; /* --background */
            color: hsl(0 0% 98%) !important; /* --foreground */
        }
        /* All other custom CSS removed as Tailwind is handling styling where not overridden */
    </style>
</head>
<body class="dark font-sans antialiased">
    <div id="loading" class="loading">Loading CryptoVersus.io...</div>
    <div id="root"></div>
    <div id="error" class="error-message" style="display: none;"></div>
    
    <script type="module">
        // Enhanced cache-busting utilities
        const clearBrowserCaches = async () => {
            try {
                // Clear service workers
                if ('serviceWorker' in navigator) {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    await Promise.all(registrations.map(reg => reg.unregister()));
                }
                
                // Clear caches if available
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    await Promise.all(cacheNames.map(name => caches.delete(name)));
                }
                
                // Clear session storage
                if ('sessionStorage' in window) {
                    sessionStorage.clear();
                }
                
                console.log('Browser caches cleared for development');
            } catch (error) {
                console.warn('Could not clear all caches:', error);
            }
        };

        // Generate cache-busting URL
        const getCacheBustingUrl = (baseUrl) => {
            const timestamp = Date.now();
            const randomSuffix = Math.random().toString(36).substring(2, 15);
            const performanceNow = performance.now().toString().replace('.', '');
            return `${baseUrl}?v=${timestamp}&cb=${randomSuffix}&pf=${performanceNow}&nocache=true&_=${Math.random()}`;
        };

        // Error handling for module loading
        const showError = (message) => {
            const loading = document.getElementById('loading');
            const errorDiv = document.getElementById('error');
            
            if (loading) loading.style.display = 'none';
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }
        };

        const hideLoading = () => {
            const loading = document.getElementById('loading');
            if (loading) loading.style.display = 'none';
        };

        // Initialize the website with error handling
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Clear all browser caches first
                await clearBrowserCaches();
                
                // Dynamic import with enhanced cache busting
                const moduleUrl = getCacheBustingUrl('./src/features/homepage/index.js');
                console.log('Loading module with cache-busting URL:', moduleUrl);
                
                const { default: initWebsite } = await import(moduleUrl);
                
                hideLoading();
                
                // Initialize website and handle result
                const initResult = initWebsite('root');
                
                if (initResult && initResult.type === 'Left') {
                    showError(`Initialization failed: ${initResult.value?.message || 'Unknown error'}`);
                } else {
                    console.log('CryptoVersus.io website initialized successfully');
                }
                
            } catch (error) {
                hideLoading();
                showError(`Failed to load website: ${error.message}`);
                console.error('Website loading error:', error);
                
                // Show a button to hard refresh
                const errorDiv = document.getElementById('error');
                if (errorDiv) {
                    const refreshButton = document.createElement('button');
                    refreshButton.textContent = 'Hard Refresh Page';
                    refreshButton.style.cssText = 'margin-top: 10px; padding: 10px 20px; cursor: pointer;';
                    refreshButton.onclick = () => {
                        // Force a complete page reload bypassing cache
                        window.location.href = window.location.href + '?nocache=' + Date.now();
                    };
                    errorDiv.appendChild(refreshButton);
                }
            }
        });

        // Global error handler for unhandled errors
        window.addEventListener('error', (event) => {
            showError(`Unexpected error: ${event.error?.message || 'Unknown error'}`);
        });

        window.addEventListener('unhandledrejection', (event) => {
            showError(`Promise rejection: ${event.reason?.message || 'Unknown error'}`);
        });

        // Additional development cache prevention
        window.addEventListener('beforeunload', () => {
            // Try to clear caches when navigating away
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => caches.delete(name));
                });
            }
        });
    </script>
</body>
</html> 